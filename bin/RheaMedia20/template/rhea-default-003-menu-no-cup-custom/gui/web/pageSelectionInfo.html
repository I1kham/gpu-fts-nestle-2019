<html>
<head>
	<title>GUI</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body onLoad="rheaBootstrap()">

<div id="mainWrapper" class="wrapper1024x600">
	<div class="pageConfirm">
		<div style="float:left; width:40%; text-align:center;">
			<table border='0' cellspacing='0' cellpadding='0' width="100%" height="100%">
				<tr valign="middle">
					<td align="center">
						<div id="selImage"></div>
						<div id="selName" class="pageSelInfo_title"></div>
						<div id="selInfo" class="pageSelInfo_detail"></div>
					</td>
				</tr>
			</table>
		</div>
		
		<div style="float:right; width:58%; text-align:center">
			<table border='0' cellspacing='0' cellpadding='0' width="100%" height="100%">
				<tr valign="middle">
					<td align="center">
						<div id="imgNutritionalInfo"></div>
					</td>
				</tr>
			</table>
		</div>
		
		<div class="clear"></div>
	</div>

	
	<!-- il btn home lo metto qui in position absolute per dargli una maggiore area di click -->
	<div id="divBtnHome" class="btnIndietro">
		<img draggable='false' src="img/btnHome.png">
	</div>
</div> <!-- wrapper1024x600 -->

<script src="config/lang.js"></script>
<script src="config/mainMenuIcons.js"></script>
<script src="config/MMI.js"></script>
<script src="js/rheaBootstrap.js"></script>
<script language="javascript">
function onRheaBootstrapFinished() 
{
	lang_loadLang(lang_getCurLangISOCode()).then (onAfterLangLoaded);
}

function onAfterLangLoaded()
{
	//in get ci deve essere il parametro che indica quale iconMenu è stata selezionata
	iconNum = parseInt(rheaGetURLParamOrDefault("iconMenu", 0));
	
	var image = "<img draggable='false' src='" +MMI_getImgForPageConfirm(iconNum) +"'>";
	var d = rheaGetElemByID("selImage");
	rheaSetElemHTML(d, image);
	
	//invece che "onclick", trappo l'evento "mouse up" cheè più affidabile sul touchscreen
	d = rheaGetElemByID("divBtnHome");
	d.addEventListener('mouseup', function (ev)
	{
		window.location = "pageConfirm.html?iconMenu=" +iconNum;
	}, true);

	
	var iconDisplayName = MMI_getDisplayName(iconNum);
	
	//carica i contenuti in lingua di questa pagina
	lang_loadJS ("mainMenuIconsInfo")
		.then ( function()
		{
			var d = rheaGetElemByID("selName");
			rheaSetElemHTML(d, iconDisplayName);			
			
			d = rheaGetElemByID("selInfo");
			rheaSetElemHTML(d, rheaMainMenuIconsInfo[iconNum]);
			
			lang_loadJS ("nutriInfo").then ( function()
			{
				if (rheaLang_nutriInfo[iconNum] != "")
				{
					var image = "<img draggable='false' src='upload/" +rheaLang_nutriInfo[iconNum] +"'>";
					var d = rheaGetElemByID("imgNutritionalInfo");
					rheaSetElemHTML(d, image);
				}
			});
			
		});
}

</script>


</html>
