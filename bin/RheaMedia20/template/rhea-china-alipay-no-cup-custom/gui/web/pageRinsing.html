<html>
	<head>
		<title>GUI</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link href="style.css" rel="stylesheet" type="text/css">
	</head>

	<body onLoad="rheaBootstrap()">
		<div id="mainWrapper" class="wrapper1024x600" style="position:relative">	
			<img src="" alt="" style="width: 100%; height: 100%;"/>
		</div>	

		<script src="config/allowedLang.js"></script>
		<script src="config/lang.js"></script>
		<script src="config/pageStandby.js"></script>
		<script src="config/mainMenuIcons.js"></script>
		<script src="config/MMI.js"></script>
		<script src="js/rheaBootstrap.js"></script>
		<script language="javascript">
			function onRheaBootstrapFinished() {
				lang_loadLang(lang_getCurLangISOCode()).then (onAfterLangLoaded);
			}

			function onAfterLangLoaded() {
				var image;
				
				if ( typeof rinsingImages === undefined ) {
					image = 'img/TS_hot_water_warning.png'

					document.querySelector( '#mainWrapper img' ).src = image;
					return;
				}

				for (var i=0; i<rinsingImages.length; i++) {
					if (Object.keys( rinsingImages[i])[0] === lang_getCurLangISOCode() )
						image = "upload/" + rinsingImages[i][lang_getCurLangISOCode()];
				}

				if ( !image ) { image = 'img/TS_hot_water_warning.png' }

				document.querySelector( '#mainWrapper img' ).src = image;

				rhea.onEvent_cpuStatus = function( statusID, statusStr, flag16 ) {
					console.log ("onEvent_cpuStatus[" + statusID + "][" + statusStr + "][" + flag16 + "]");
					
					if ( parseInt(statusID) !== 8 ) {	// End of washing process
						gotoMenuPage();
					}
				}
			}

			function gotoMenuPage() {
				window.location = "pageMenu.html";
			}
		</script>
	</body>
</html>
