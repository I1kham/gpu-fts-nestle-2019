<html>
<head>
	<title>GUI</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body onLoad="rheaBootstrap()">

<div id="mainWrapper" class="wrapper1024x600">
	<div class="header">
		<div class="header_left"></div>
		<div class="header_center"><img draggable='false' src="img/logo.png"></div>
		<div class="header_right"></div>
		<div class="clear"></div>
	</div>

	<div class="page" style="position:relative; text-align:center;">
		<div id="divSpacerWhenNoBtnStop" style="display:none; height:50px">&nbsp;</div>
		<div id="divImage" class="pageSelInProg_image"></div>
		<div style="position:relative; top:-80px; left:0">
			<div class="pageSelInProg_iconInProgress"><img draggable='false' src="img/animationRound.gif"></div>
			<table border='0' cellspacing='0' cellpadding='0' height='100' width='100%'>
				<tr valign="middle">
					<td align="center"><div id="divTitle" class="pageSelInProg_title"></div></td>
				</tr>
			</table>
			<div id="btnStop" class="btnStop" style="font-weight:bold; display:none" onclick="onBtnStopSelection()"></div>
		</div>
	</div>
	
	<div class="footer">
		<div class="footer_left"></div>
		<div class="footer_center"><div id="divCPUMessage" style="display:none">CPU Message here</div></div>
		<div class="footer_right"></div>
		<div class="clear"></div>
	</div>	
</div>

<script src="js/rheaBootstrap.js"></script>
<script language="javascript">
var iconNum = 0;
var selNum = 0;
function onRheaBootstrapFinished()
{
	rhea.onEvent_selectionReqStatus = function (status)
	{
		//status=3 => aborted
		//status=4 => finished
		if (status == 3 || status == 4)
			gotoSelFinished();
	}
	
	/*rhea.onEvent_cpuMessage = function(msg, importanceLevel)
	{
		rheaSetDivHTMLByName("divCPUMessage", msg);
	}*/	
	
	
	//in get ci deve essere il parametro che indica quale iconMenu Ã¨ stata selezionata
	iconNum = parseInt(rheaGetURLParamOrDefault("iconMenu", 0));
	selNum  = parseInt(rheaGetURLParamOrDefault("selNum", 0));
	var showBtnStop  = parseInt(rheaGetURLParamOrDefault("btnStop", 0));
	if (showBtnStop != 1)
	{
		showBtnStop = 0;
		rheaShowElem(rheaGetElemByID("divSpacerWhenNoBtnStop"));
	}
	
	var iconDisplayName = rhea.MMI_getDisplayName(iconNum);
	var image = "<img draggable='false' src='" +rhea.MMI_getImgForPageConfirm(iconNum) +"'>";
	
	var d = rheaGetElemByID("divImage");
	rheaSetElemHTML(d, image);
	
	d = rheaGetElemByID("divTitle");
	rheaSetElemHTML(d, iconDisplayName);	
	
	if (showBtnStop == 1)
	{
		d = rheaGetElemByID("btnStop");
		rheaSetElemHTML(d, rheaLang.BTN_STOP);
		rheaSetDisplayMode(d, "inline-block");
	}
	
	
	//your drink is dispensing msg..
	var d = rheaGetElemByID("divCPUMessage");
	rheaSetElemHTML (d, rheaLang["LAB_YOUR_DRINK_IS_DISPENSING"]);
	rheaShowElem (d);
	
	
	//alla peggio, dopo 50 secondi termino
	//setTimeout (gotoSelFinished, 50000)
}


function onBtnStopSelection()
{
	var d = rheaGetElemByID("btnStop");
	rheaHideElem(d);

	rhea.selection_stop();
}


function gotoSelFinished()
{
	var d = rheaGetElemByID("btnStop");
	rheaHideElem(d);
	
	window.location = "pageSelFinished.html?iconMenu=" +iconNum +"&selNum=" +selNum;
}
</script>


</html>
